"use strict";(self.webpackChunkkiosk=self.webpackChunkkiosk||[]).push([[253],{6253:(Q,x,e)=>{e.r(x),e.d(x,{FacilitiesModule:()=>E});var v=e(4406),P=e(6289),i=e(5e3),y=e(6053),h=e(4850),Z=e(7545),F=e(1059),_=e(2986),k=e(4294),I=e(7565),w=e(4308),T=e(5500),U=e(5667),m=e(9808),b=e(2466),A=e(6651);function S(n,a){if(1&n&&(i.TgZ(0,"div",21),i._uU(1),i.qZA()),2&n){const t=i.oxw().$implicit;i.xp6(1),i.hij(" ",t.distanceDisplay," ")}}function N(n,a){if(1&n){const t=i.EpF();i.TgZ(0,"a",22),i.NdJ("click",function(){i.CHM(t);const f=i.oxw().$implicit;return i.oxw().showMapLink(f.placeId)}),i._UZ(1,"i",23),i.TgZ(2,"span",4),i._uU(3,"views.display_links.take_me_there"),i.qZA()()}}function Y(n,a){if(1&n&&(i.TgZ(0,"div",14)(1,"div",8),i._UZ(2,"img",15),i.qZA(),i.TgZ(3,"div",16),i._uU(4),i.qZA(),i.TgZ(5,"div",17)(6,"div",18),i._uU(7),i.qZA(),i._uU(8),i.qZA(),i.YNc(9,S,2,1,"div",19),i.YNc(10,N,4,0,"a",20),i.qZA()),2&n){const t=a.$implicit;i.xp6(2),i.Q6J("src",t.facility.iconUrl,i.LSH),i.xp6(2),i.Oqu(t.name||t.facility.name),i.xp6(3),i.Oqu(t.buildingFloor.building.name),i.xp6(1),i.hij(" ",t.buildingFloor.name," "),i.xp6(1),i.Q6J("ngIf",t.distance),i.xp6(1),i.Q6J("ngIf",t.placeId)}}const C=999999999;let j=(()=>{class n{constructor(t,s,f,c,R){this.activatedRoute=t,this.displayService=s,this.ngbModal=f,this.visioglobeService=c,this.location=R,this.saved=new i.vpe,this.pageName="facility_list_page";const M=this.displayService.data.pipe((0,h.U)(p=>{const g=p.facilitiesMap[this.activatedRoute.snapshot.params.id];return g?g.buildingFloorsFacilities:[]})),B=(0,y.aj)([M,this.displayService.data]).pipe((0,Z.w)(([p,g])=>{const l=g.displayLink.placeId,o=l?p.filter(d=>d.placeId).map(d=>({from:l,to:d.placeId})):[];return this.visioglobeService.getDistance(o).pipe((0,h.U)(d=>{const u=new Map,O={};return p.forEach(r=>{u.set(r.id,0),O[r.placeId]=r.id}),d.forEach(r=>{u.set(O[r.to],r.distance)}),u}))}),(0,F.O)(new Map),(0,k.Ph)(1));this.buildingFloorsFacilities=(0,y.aj)([M,B]).pipe((0,h.U)(([p,g])=>{const l=[...p];return l.forEach(o=>{o.distance=g.get(o.id)||C}),l.sort((o,d)=>o.distance-d.distance),l.forEach(o=>{o.distance>=C?o.distance=0:o.distanceDisplay=`${o.distance.toFixed(0)}m`}),l}))}ngOnInit(){this.displayService.setPageName(this.pageName),this.addVisits({visit:{facility_clicks:{[this.activatedRoute.snapshot.params.id]:1},average_page_usage:1,total_page_views:{facility_list_page:1}}}).subscribe(()=>this.saved.next())}goBack(){this.location.back()}showMapLink(t){this.displayService.data.pipe((0,_.q)(1)).subscribe(s=>{const c=this.ngbModal.open(I.t,{container:"#app",windowClass:"map-modal map-link"}).componentInstance;c.startId=s.displayLink.placeId,c.endId=t,c.token=this.activatedRoute.snapshot.parent.parent.parent.params.token,c.did=this.activatedRoute.snapshot.parent.parent.parent.params.id})}addVisits(t){return this.displayService.addVisits(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(v.gz),i.Y36(w.G),i.Y36(T.FF),i.Y36(U.e),i.Y36(m.Ye))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-index"]],outputs:{saved:"saved"},decls:20,vars:3,consts:[["id","page-facilities"],[1,"back","d-flex","align-items-center","cursor-pointer",3,"click"],[1,"icon","mr-4"],[1,"kf-angle-right"],["translate",""],["translate","",1,"page-title","mb-0"],[1,"facilities-list"],[1,"title-row","single-facility","d-flex","align-items-center"],[1,"logo"],["translate","",1,"facility-name"],["translate","",1,"floor"],["translate","",1,"distance"],[1,"ml-auto","wayfinding-icon-set"],["class","single-facility d-flex align-items-center bg-white",4,"ngFor","ngForOf"],[1,"single-facility","d-flex","align-items-center","bg-white"],[3,"src"],[1,"facility-name"],[1,"floor"],[1,"building"],["class","distance",4,"ngIf"],["class","ml-auto cursor-pointer wayfinding-icon-set",3,"click",4,"ngIf"],[1,"distance"],[1,"ml-auto","cursor-pointer","wayfinding-icon-set",3,"click"],[1,"kf-compass","icon-circle"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0)(1,"a",1),i.NdJ("click",function(){return s.goBack()}),i.TgZ(2,"div",2),i._UZ(3,"i",3),i.qZA(),i.TgZ(4,"span",4),i._uU(5,"views.display_links.facilities.index.category"),i.qZA()(),i.TgZ(6,"h1",5),i._uU(7,"views.display_links.facilities.index.title"),i.qZA(),i.TgZ(8,"div",6)(9,"div",7),i._UZ(10,"div",8),i.TgZ(11,"div",9),i._uU(12,"views.display_links.facilities.index.name"),i.qZA(),i.TgZ(13,"div",10),i._uU(14,"views.display_links.facilities.index.location"),i.qZA(),i.TgZ(15,"div",11),i._uU(16,"views.display_links.facilities.index.distance"),i.qZA(),i._UZ(17,"div",12),i.qZA(),i.YNc(18,Y,11,6,"div",13),i.ALo(19,"async"),i.qZA()()),2&t&&(i.xp6(18),i.Q6J("ngForOf",i.lcZ(19,1,s.buildingFloorsFacilities)))},directives:[b.Pi,m.sg,A.K,m.O5],pipes:[m.Ov],styles:["#page-facilities[_ngcontent-%COMP%]{height:840px;overflow-y:auto}#page-facilities[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{padding:40px;margin-bottom:10px;font-size:24px;color:var(--primary-color)}#page-facilities[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:rotate(-180deg)}#page-facilities[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{padding:0 40px 40px;font-size:32px;font-weight:700;color:var(--primary-color)}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]{height:120px;padding:0 40px;margin-bottom:20px;font-size:24px;font-weight:400;color:#636363;border-radius:6px;box-shadow:0 4px 40px #0000001a}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{flex:0 0 6%;width:60px;height:60px}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{flex:0 0 8%}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .wayfinding-icon-set[_ngcontent-%COMP%]{flex:0 0 10%}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .facility-name[_ngcontent-%COMP%], #page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .floor[_ngcontent-%COMP%]{flex:0 0 36%;max-height:96px;padding:0 40px;overflow:hidden;word-break:break-word}#page-facilities[_ngcontent-%COMP%]   .single-facility[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]{font-size:20px}#page-facilities[_ngcontent-%COMP%]   .single-facility.title-row[_ngcontent-%COMP%]{height:auto;font-size:20px;color:#a4a4a4;box-shadow:none}@media (orientation: portrait){#page-facilities[_ngcontent-%COMP%]{height:1700px}}"]}),n})(),z=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-facilities"]],decls:1,vars:0,template:function(t,s){1&t&&i._UZ(0,"router-outlet")},directives:[v.lC],styles:[""]}),n})();var J=e(626);const L=[{path:":id",component:z,children:[{path:"",component:j}]}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[[P.m,J.F,v.Bz.forChild(L)]]}),n})()}}]);