"use strict";(self.webpackChunkkiosk=self.webpackChunkkiosk||[]).push([[619],{3619:(V,p,a)=>{a.r(p),a.d(p,{FloorsModule:()=>z});var r=a(4406),h=a(6289),d=a(2986),n=a(5e3),f=a(4308),s=a(9808),m=a(1353),_=a(6651);function C(o,e){if(1&o&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.intro)}}function O(o,e){if(1&o&&(n.TgZ(0,"span",18),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.topic)}}function P(o,e){if(1&o&&(n.TgZ(0,"div",21),n._UZ(1,"img",22),n.qZA()),2&o){const t=e.$implicit;n.xp6(1),n.Q6J("src",t.iconUrl,n.LSH)}}function v(o,e){if(1&o&&(n.TgZ(0,"div",19),n.YNc(1,P,2,1,"div",20),n.qZA()),2&o){const t=n.oxw().$implicit,i=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",i.filterFacilities(t.facilities))}}const M=function(o,e){return[o,"floors",e]},b=function(o){return{index:o}};function y(o,e){if(1&o&&(n.TgZ(0,"a",14)(1,"div",15),n._uU(2),n.YNc(3,O,2,1,"span",16),n.qZA(),n.YNc(4,v,2,1,"div",17),n.qZA()),2&o){const t=e.$implicit,i=n.oxw().index,l=n.oxw(2);n.ekj("has-icon",l.hasIcon),n.Q6J("routerLink",n.WLB(7,M,l.displayService.baseUrl,t.id))("queryParams",n.VKq(10,b,i)),n.xp6(2),n.hij(" ",t.name," "),n.xp6(1),n.Q6J("ngIf",t.topic&&"null"!=t.topic),n.xp6(1),n.Q6J("ngIf",l.filterFacilities(t.facilities).length)}}function w(o,e){if(1&o&&(n.TgZ(0,"div",4)(1,"h3"),n._uU(2),n.qZA(),n.TgZ(3,"div",2)(4,"div",8),n._UZ(5,"img",9),n.TgZ(6,"div",10),n.YNc(7,C,2,1,"span",11),n.qZA()(),n.TgZ(8,"div",12),n.YNc(9,y,5,12,"a",13),n.qZA()()()),2&o){const t=e.$implicit,i=n.oxw(2);n.Akn(i.buildingStyle),n.xp6(2),n.Oqu(t.name),n.xp6(3),n.Q6J("src",t.imageUrl,n.LSH),n.xp6(2),n.Q6J("ngIf","null"!=t.intro),n.xp6(2),n.Q6J("ngForOf",t.buildingFloors)}}function Z(o,e){if(1&o){const t=n.EpF();n.TgZ(0,"div",23),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).prevBuilding()}),n._UZ(1,"i",24),n.qZA()}}function I(o,e){if(1&o){const t=n.EpF();n.TgZ(0,"div",25),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).nextBuilding()}),n._UZ(1,"i",26),n.qZA()}}function F(o,e){if(1&o&&(n.TgZ(0,"div",1)(1,"div",2),n._UZ(2,"app-search-sidebar"),n.TgZ(3,"div",3),n._UZ(4,"div",4),n.YNc(5,w,10,6,"div",5),n.YNc(6,Z,2,0,"div",6),n.YNc(7,I,2,0,"div",7),n.qZA()()()),2&o){const t=e.ngIf,i=n.oxw();n.xp6(5),n.Q6J("ngForOf",t.departmentStore.buildings),n.xp6(1),n.Q6J("ngIf",0!=i.buildingIndex),n.xp6(1),n.Q6J("ngIf",i.buildingIndex!=t.departmentStore.buildings.length-1)}}let k=(()=>{class o{constructor(t,i){this.displayService=t,this.activatedRoute=i,this.buildingIndex=0,this.hasIcon=!1,this.buildingIndex=this.activatedRoute.snapshot.queryParams.index||0}ngOnInit(){this.displayService.data.pipe((0,d.q)(1)).subscribe(i=>{i.departmentStore.buildings.map(l=>l.buildingFloors.map(c=>(this.filterFacilities(c.facilities).length>0&&(this.hasIcon=!0),this.hasIcon)))}),this.displayService.addVisits({visit:{average_page_usage:1,total_page_views:{floor_search_page:1}}}).subscribe()}get buildingStyle(){return{transform:`translateX(${-100*this.buildingIndex-100}%)`}}prevBuilding(){0!==this.buildingIndex&&--this.buildingIndex}nextBuilding(){this.displayService.data.pipe((0,d.q)(1)).subscribe(t=>{this.buildingIndex+1>=t.departmentStore.buildings.length||++this.buildingIndex})}filterFacilities(t){return t.filter(i=>i.category)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(f.G),n.Y36(r.gz))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-index"]],decls:2,vars:3,consts:[["id","page-floors",4,"ngIf"],["id","page-floors"],[1,"d-flex"],[1,"buildings"],[1,"building"],["class","building",3,"style",4,"ngFor","ngForOf"],["class","btn-building building-prev",3,"click",4,"ngIf"],["class","btn-building building-next",3,"click",4,"ngIf"],[1,"building-info"],[1,"photo",3,"src"],[1,"intro"],[4,"ngIf"],[1,"floors"],["class","floor",3,"has-icon","routerLink","queryParams",4,"ngFor","ngForOf"],[1,"floor",3,"routerLink","queryParams"],[1,"title"],["class","ml-2",4,"ngIf"],["class","facilities",4,"ngIf"],[1,"ml-2"],[1,"facilities"],["class","facility",4,"ngFor","ngForOf"],[1,"facility"],[3,"src"],[1,"btn-building","building-prev",3,"click"],[1,"kf-arrow-left","icon-circle","text-white"],[1,"btn-building","building-next",3,"click"],[1,"kf-arrow-right","icon-circle","text-white"]],template:function(t,i){1&t&&(n.YNc(0,F,8,3,"div",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,i.displayService.data))},directives:[s.O5,m.E,s.sg,_.K,r.yS],pipes:[s.Ov],styles:["#page-floors[_ngcontent-%COMP%]   .buildings[_ngcontent-%COMP%]{position:relative;width:1420px;height:926px;margin:0 auto;overflow:hidden;white-space:nowrap}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]{display:inline-block;width:100%;height:100%;padding:57px 40px;overflow:auto;white-space:normal;transition:transform .5s}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%] > .d-flex[_ngcontent-%COMP%]{justify-content:space-between}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:-24px 0 38px 72px;font-size:24px;color:var(--primary-color)}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .building-info[_ngcontent-%COMP%]{width:50%}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:600px;height:320px;-o-object-fit:cover;object-fit:cover}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{margin-top:19px;margin-bottom:25px;font-size:14px;color:#bcbcbc}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .facilities[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;width:50%;height:100%}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .facility[_ngcontent-%COMP%]{width:16px;height:16px}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .facility[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .facility[_ngcontent-%COMP%] + .facility[_ngcontent-%COMP%]{margin-left:16px}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floors[_ngcontent-%COMP%]{max-height:700px;overflow:auto}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:600px;height:100px;padding:0 24px;font-size:24px;color:var(--primary-color);text-decoration:none;cursor:pointer;background-color:#fff;border:2px solid var(--primary-color);border-radius:6px}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor[_ngcontent-%COMP%] + .floor[_ngcontent-%COMP%]{margin-top:16px}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor.has-icon[_ngcontent-%COMP%]{justify-content:space-between}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor.has-icon[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:50%;text-align:left}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor.has-icon[_ngcontent-%COMP%]   .facilities[_ngcontent-%COMP%]{width:50%}#page-floors[_ngcontent-%COMP%]   .btn-building[_ngcontent-%COMP%]{position:absolute;top:20px;z-index:3;width:48px;height:48px;margin:auto;cursor:pointer}#page-floors[_ngcontent-%COMP%]   .btn-building[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}#page-floors[_ngcontent-%COMP%]   .building-prev[_ngcontent-%COMP%]{left:40px}#page-floors[_ngcontent-%COMP%]   .building-next[_ngcontent-%COMP%]{right:50px}@media (orientation: portrait){#page-floors[_ngcontent-%COMP%] > .d-flex[_ngcontent-%COMP%]{flex-direction:column}#page-floors[_ngcontent-%COMP%]   .buildings[_ngcontent-%COMP%]{width:1000px;height:1510px}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]{padding-right:0;padding-bottom:0;padding-left:0}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%] > .d-flex[_ngcontent-%COMP%]{flex-direction:column}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .building-info[_ngcontent-%COMP%]{width:100%}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:1000px}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{height:66px;margin-top:40px;margin-bottom:80px;overflow:auto}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floors[_ngcontent-%COMP%]{max-height:860px;margin-left:0}#page-floors[_ngcontent-%COMP%]   .building[_ngcontent-%COMP%]   .floor[_ngcontent-%COMP%]{width:996px;margin:0}#page-floors[_ngcontent-%COMP%]   .building-prev[_ngcontent-%COMP%]{left:0}#page-floors[_ngcontent-%COMP%]   .building-next[_ngcontent-%COMP%]{right:14px}}"]}),o})();var u=a(591),g=a(4850),x=a(4294),T=a(2466),S=a(1293),A=a(9671);function U(o,e){if(1&o&&(n.TgZ(0,"div",17),n._UZ(1,"img",18),n.qZA()),2&o){const t=n.oxw(2).ngIf;n.xp6(1),n.Q6J("src",t.mapUrl,n.LSH)}}const q=function(o){return[o,"floors"]},J=function(o){return{index:o}};function Q(o,e){if(1&o&&(n.TgZ(0,"div",8)(1,"div",9)(2,"a",10),n._UZ(3,"i",11),n.qZA(),n.TgZ(4,"span",12),n._uU(5,"views.display_links.display_links_shared.search_sidebar.floors"),n.qZA(),n.TgZ(6,"span"),n._uU(7,">"),n.qZA(),n.TgZ(8,"span"),n._uU(9),n.qZA()(),n.TgZ(10,"div",13)(11,"div",14),n._uU(12),n.qZA(),n.TgZ(13,"div",15),n._uU(14),n.qZA()(),n.YNc(15,U,2,1,"div",16),n.qZA()),2&o){const t=e.ngIf,i=n.oxw().ngIf,l=n.oxw();n.xp6(2),n.Q6J("routerLink",n.VKq(8,q,l.displayService.baseUrl))("queryParams",n.VKq(10,J,l.buildingIndex)),n.xp6(7),n.AsE("",i.name," ",i.topic,""),n.xp6(3),n.AsE("",i.name," ",i.topic,""),n.xp6(2),n.Oqu(i.intro),n.xp6(1),n.Q6J("ngIf",i.mapUrl&&t.displayLink.setting.displayStoreMap)}}function j(o,e){if(1&o){const t=n.EpF();n.TgZ(0,"div",1),n.YNc(1,Q,16,12,"div",2),n.ALo(2,"async"),n.TgZ(3,"div",3)(4,"app-alphabets-filter",4),n.NdJ("select",function(l){return n.CHM(t),n.oxw().selectAlphabet(l)}),n.ALo(5,"async"),n.ALo(6,"async"),n.qZA(),n.TgZ(7,"div",5),n._uU(8,"views.display_links.floors.show.brands"),n.qZA(),n._UZ(9,"app-places",6),n.ALo(10,"async"),n.TgZ(11,"div",7),n._uU(12,"views.display_links.floors.show.public_facilities"),n.qZA(),n._UZ(13,"app-places",6),n.ALo(14,"async"),n.qZA()()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",n.lcZ(2,5,t.displayService.data)),n.xp6(3),n.Q6J("stores",n.lcZ(5,7,t.stores))("facilities",n.lcZ(6,9,t.buildingFloorsFacilities)),n.xp6(5),n.Q6J("places",n.lcZ(10,11,t.filteredStores)),n.xp6(4),n.Q6J("places",n.lcZ(14,13,t.filteredFacilities))}}let L=(()=>{class o{constructor(t,i){this.displayService=t,this.activatedRoute=i,this.saved=new n.vpe,this.filteredFacilities=new u.X([]),this.filteredStores=new u.X([]),this.buildingIndex=0,this.pageName="floor_store_list_page",this.buildingIndex=this.activatedRoute.snapshot.queryParams.index,this.buildingFloor=this.displayService.data.pipe((0,g.U)(l=>l.buildingFloorsMap[this.activatedRoute.snapshot.params.id])),this.stores=this.buildingFloor.pipe((0,g.U)(l=>l.stores.map(c=>Object.assign(Object.assign({},c),{description:`${l.building.name||""} ${l.name||""} ${l.topic||""}`,image:c.brand.logoUrl,name:c.brand.name,link:[this.displayService.baseUrl,"stores",c.id],map:l.mapUrl,location:`${l.name}-${c.no}`,placeId:c.placeId})).sort((c,B)=>c.name.localeCompare(B.name))),(0,x.Ph)(1)),this.buildingFloorsFacilities=this.buildingFloor.pipe((0,g.U)(l=>l.buildingFloorsFacilities.filter(c=>c.facility.category).map(c=>Object.assign(Object.assign({},c),{description:`${l.building.name||""} ${l.name||""} ${l.topic||""}`,image:c.facility.iconUrl,name:c.name||c.facility.name,link:null,map:l.mapUrl,location:l.name,placeId:c.placeId}))),(0,x.Ph)(1))}ngOnInit(){this.displayService.setPageName(this.pageName),this.addVisits({visit:{average_page_usage:1,total_page_views:{floor_store_list_page:1}}}).subscribe(()=>this.saved.next())}selectAlphabet(t){this.filteredFacilities.next(t.facilities),this.filteredStores.next(t.stores)}addVisits(t){return this.displayService.addVisits(t)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(f.G),n.Y36(r.gz))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-show"]],outputs:{saved:"saved"},decls:2,vars:3,consts:[["id","page-floor","class","d-flex",4,"ngIf"],["id","page-floor",1,"d-flex"],["class","block-left",4,"ngIf"],[1,"block-right","flex-grow-1"],[3,"stores","facilities","select"],["translate","",1,"title"],[3,"places"],["translate","",1,"title","mt-5"],[1,"block-left"],[1,"breadcrumbs"],[1,"back",3,"routerLink","queryParams"],[1,"kf-arrow-left"],["translate",""],[1,"header"],[1,"title"],[1,"intro"],["class","map m-auto",4,"ngIf"],[1,"map","m-auto"],[3,"src"]],template:function(t,i){1&t&&(n.YNc(0,j,15,15,"div",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,i.buildingFloor))},directives:[s.O5,r.yS,T.Pi,_.K,S.L,A.I],pipes:[s.Ov],styles:["#page-floor[_ngcontent-%COMP%]{height:926px}#page-floor[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{margin-right:33px;text-decoration:none;color:var(--primary-color)}#page-floor[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]:hover{color:var(--primary-color)}#page-floor[_ngcontent-%COMP%]   .breadcrumbs[_ngcontent-%COMP%]{color:var(--primary-color);font-size:24px;line-height:36px;margin-bottom:33px}#page-floor[_ngcontent-%COMP%]   .breadcrumbs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{width:932px;height:100%;padding:32px 40px;background-color:#fff}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-top:96px;margin-bottom:55px;margin-left:63px}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#636363;font-size:36px;margin-right:40px;display:inline-block;width:192px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{display:inline-block;height:44px;width:530px;opacity:.4;color:#636363;font-family:PingFang TC;font-size:16px;line-height:22px;overflow:auto}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{height:489px;text-align:center}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}#page-floor[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{padding:32px 57px 77px;overflow:auto}#page-floor[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--primary-color);font-size:24px;line-height:36px}#page-floor[_ngcontent-%COMP%]   app-alphabets-filter[_ngcontent-%COMP%]{margin-bottom:40px}@media (orientation: portrait){#page-floor[_ngcontent-%COMP%]{flex-direction:column;height:1720px}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{width:100%;height:auto}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-top:26px}#page-floor[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{width:880px;height:450px}}"]}),o})(),N=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-floors"]],decls:1,vars:0,template:function(t,i){1&t&&n._UZ(0,"router-outlet")},directives:[r.lC],styles:[""]}),o})();var Y=a(626);const $=[{path:"",component:N,children:[{path:"",component:k},{path:":id",component:L}]}];let z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[h.m,Y.F,r.Bz.forChild($)]]}),o})()}}]);