"use strict";(self.webpackChunkkiosk=self.webpackChunkkiosk||[]).push([[752],{2752:(F,d,a)=>{a.r(d),a.d(d,{CategoriesModule:()=>k});var h=a(4406),C=a(6289),e=a(5e3);let f=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-categories"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[h.lC],styles:[""]}),n})();var s=a(591),u=a(6053),l=a(4850),g=a(4294),x=a(4308),v=a(1353),p=a(9808),y=a(1293),O=a(9671);function M(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().back()}),e._UZ(2,"i",11),e.qZA(),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.BQk()}if(2&n){const t=r.ngIf;e.xp6(4),e.hij(" ",t.name," ")}}function P(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectCategory(i)}),e._uU(1),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}let b=(()=>{class n{constructor(t){this.displayService=t,this.saved=new e.vpe,this.filteredFacilities=new s.X([]),this.filteredStores=new s.X([]),this.pageName="category_search_page",this.selectedCategorySubject=new s.X(null),this.selectedCategory=this.selectedCategorySubject.asObservable(),this.categories=(0,u.aj)([this.displayService.data,this.selectedCategorySubject]).pipe((0,l.U)(([o,c])=>c?c.children:o.rootCategories),(0,g.Ph)(1)),this.stores=this.selectedCategory.pipe((0,l.U)(o=>{if(o){let c=[];return o.brands.forEach(i=>{c=[...c,...i.stores]}),c.map(i=>Object.assign(Object.assign({},i),{description:`${i.buildingFloor.building.name||""} ${i.buildingFloor.name||""} ${i.buildingFloor.topic||""}`,image:i.brand.logoUrl,name:i.brand.name,link:[this.displayService.baseUrl,"stores",i.id],map:i.buildingFloor.mapUrl,location:`${i.buildingFloor.name}-${i.no}`,placeId:i.placeId})).sort((i,m)=>i.name.localeCompare(m.name))}return[]}),(0,g.Ph)(1)),this.facilities=this.selectedCategory.pipe((0,l.U)(o=>o?o.facilities.map(c=>({name:c.name,description:c.note,image:c.iconUrl,link:[this.displayService.baseUrl,"facilities",c.id]})):[]),(0,g.Ph)(1))}ngOnInit(){this.displayService.setPageName(this.pageName),this.addVisits({visit:{average_page_usage:1,total_page_views:{category_search_page:1}}}).subscribe(()=>this.saved.next())}back(){this.selectedCategorySubject.next(this.selectedCategorySubject.value.parent),this.clickCategory()}selectCategory(t){this.selectedCategorySubject.next(t),this.clickCategory()}clickCategory(){this.addVisits({visit:{total_page_views:{category_search_page:1}}}).subscribe(()=>this.saved.next())}selectAlphabet(t){this.filteredFacilities.next(t.facilities),this.filteredStores.next(t.stores)}addVisits(t){return this.displayService.addVisits(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-index"]],outputs:{saved:"saved"},decls:18,vars:18,consts:[["id","page-categories"],[1,"d-flex"],[1,"categories"],[1,"header"],[4,"ngIf"],[3,"stores","facilities","select"],[1,"clearfix"],["class","category",3,"click",4,"ngFor","ngForOf"],[1,"overflow-auto","main-container"],[3,"places"],[1,"back",3,"click"],[1,"kf-arrow-left"],[1,"current-category"],[1,"category",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-search-sidebar"),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,M,5,1,"ng-container",4),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"app-alphabets-filter",5),e.NdJ("select",function(i){return o.selectAlphabet(i)}),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div",6),e.YNc(11,P,2,1,"div",7),e.ALo(12,"async"),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"app-places",9),e.ALo(15,"async"),e._UZ(16,"app-places",9),e.ALo(17,"async"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",e.lcZ(6,6,o.selectedCategory)),e.xp6(2),e.Q6J("stores",e.lcZ(8,8,o.stores))("facilities",e.lcZ(9,10,o.facilities)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(12,12,o.categories)),e.xp6(3),e.Q6J("places",e.lcZ(15,14,o.filteredStores)),e.xp6(2),e.Q6J("places",e.lcZ(17,16,o.filteredFacilities)))},directives:[v.E,p.O5,y.L,p.sg,O.I],pipes:[p.Ov],styles:["#page-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{position:relative;flex:1;padding:140px 90px 0}#page-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{max-height:600px;overflow:auto}#page-categories[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:54px;margin-bottom:43px;font-size:36px;font-weight:500;color:var(--primary-color)}#page-categories[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:inline-block;margin-right:40px;cursor:pointer}#page-categories[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;vertical-align:baseline}#page-categories[_ngcontent-%COMP%]   .current-category[_ngcontent-%COMP%]{display:inline-block}#page-categories[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{height:600px}#page-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;float:left;width:280px;height:193px;margin:30px 12px 12px;font-size:32px;line-height:47px;color:var(--primary-color);text-align:center;white-space:pre-line;cursor:pointer;background-color:#fff;border:1px solid var(--primary-color)}[_nghost-%COMP%]     .categories .places{overflow:auto}@media (orientation: portrait){[_nghost-%COMP%]     .categories .places{overflow:auto}}@media (orientation: portrait){#page-categories[_ngcontent-%COMP%] > .d-flex[_ngcontent-%COMP%]{flex-direction:column}#page-categories[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding-right:40px;padding-left:40px}#page-categories[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{height:1320px}#page-categories[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{width:25%;height:193px;margin:3.125% 4.1666666667%}#page-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{padding:40px 0 0}#page-categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   .clearfix[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;max-height:1376px}}"]}),n})();var _=a(626);const Z=[{path:"",component:f,children:[{path:"",component:b}]}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[C.m,_.F,h.Bz.forChild(Z)]]}),n})()}}]);